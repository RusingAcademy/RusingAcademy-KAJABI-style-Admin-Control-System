{
  "query": "\nCREATE TABLE IF NOT EXISTS funnels (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  status ENUM('draft', 'active', 'paused', 'archived') NOT NULL DEFAULT 'draft',\n  stages JSON DEFAULT ('[]'),\n  stats JSON DEFAULT ('{\"visitors\":0,\"conversions\":0,\"revenue\":0}'),\n  createdBy INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (createdBy) REFERENCES users(id) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS automations (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  triggerType ENUM('enrollment', 'purchase', 'course_complete', 'lesson_complete', 'signup', 'inactivity', 'tag_added', 'manual') NOT NULL,\n  triggerConfig JSON DEFAULT ('{}'),\n  status ENUM('active', 'paused', 'draft') NOT NULL DEFAULT 'draft',\n  steps JSON DEFAULT ('[]'),\n  stats JSON DEFAULT ('{\"triggered\":0,\"completed\":0,\"active\":0}'),\n  createdBy INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (createdBy) REFERENCES users(id) ON DELETE SET NULL\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user cYPAHDVF1MZtM6S.6044338ada58 --database cwh3JmcrqYgAZTUAinEMzM --execute \nCREATE TABLE IF NOT EXISTS funnels (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  status ENUM('draft', 'active', 'paused', 'archived') NOT NULL DEFAULT 'draft',\n  stages JSON DEFAULT ('[]'),\n  stats JSON DEFAULT ('{\"visitors\":0,\"conversions\":0,\"revenue\":0}'),\n  createdBy INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (createdBy) REFERENCES users(id) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS automations (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  triggerType ENUM('enrollment', 'purchase', 'course_complete', 'lesson_complete', 'signup', 'inactivity', 'tag_added', 'manual') NOT NULL,\n  triggerConfig JSON DEFAULT ('{}'),\n  status ENUM('active', 'paused', 'draft') NOT NULL DEFAULT 'draft',\n  steps JSON DEFAULT ('[]'),\n  stats JSON DEFAULT ('{\"triggered\":0,\"completed\":0,\"active\":0}'),\n  createdBy INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (createdBy) REFERENCES users(id) ON DELETE SET NULL\n);\n",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 2: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 6 column 28 near \"'[]'),",
    "  stats JSON DEFAULT ('{\"visitors\":0,\"conversions\":0,\"revenue\":0}'),",
    "  createdBy INT,",
    "  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,",
    "  updatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,",
    "  FOREIGN KEY (createdBy) REFERENCES users(id) ON DELETE SET NULL",
    ")\""
  ]
}